(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4167:(e,s,t)=>{"use strict";t.d(s,{JobsTable:()=>S});var a=t(5155),l=t(2115),n=t(3464),c=t(3008),r=t(5891),i=t(8524),d=t(8145),o=t(7168),x=t(9852),h=t(7133),j=t(9840),u=t(6559),m=t(7737),p=t(3904);let N=(0,t(9946).A)("search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var b=t(4616),f=t(5623),y=t(5690),v=t(8833),w=t(4695),g=t(3717),A=t(4126),k=t(2997);function S(){let[e,s]=(0,l.useState)([]),[t,m]=(0,l.useState)(!0),[S,C]=(0,l.useState)(""),[F,R]=(0,l.useState)(null),[_,M]=(0,l.useState)(!1),[P,D]=(0,l.useState)(!1),[H,J]=(0,l.useState)(!1),L=async()=>{try{m(!0);let e=await n.A.get("http://localhost:3000/api/jobs");s(e.data.data||[])}catch(e){console.error("Failed to fetch jobs:",e)}finally{m(!1),J(!1)}};(0,l.useEffect)(()=>{L()},[]);let q=async e=>{try{await n.A.post("http://localhost:3000/api/jobs/".concat(e,"/run")),L()}catch(e){console.error("Failed to run job:",e)}},O=async(e,s)=>{try{await n.A.put("http://localhost:3000/api/jobs/".concat(e),{disabled:!s}),L()}catch(e){console.error("Failed to toggle job status:",e)}},z=async()=>{if(F)try{await n.A.delete("http://localhost:3000/api/jobs/".concat(F.id)),D(!1),L()}catch(e){console.error("Failed to delete job:",e)}},T=e=>{R(e),M(!0)},$=async e=>{try{F?await n.A.put("http://localhost:3000/api/jobs/".concat(F.id),e):await n.A.post("http://localhost:3000/api/jobs",e),M(!1),L()}catch(e){console.error("Failed to save job:",e)}},G=e.filter(e=>e.name.toLowerCase().includes(S.toLowerCase())),I=e=>e.disabled?(0,a.jsx)(d.E,{variant:"outline",children:"Disabled"}):e.failedAt?(0,a.jsx)(d.E,{variant:"destructive",children:"Failed"}):e.nextRunAt?(0,a.jsx)(d.E,{variant:"secondary",children:"Scheduled"}):(0,a.jsx)(d.E,{children:"Completed"}),B=e=>{if(!e)return"-";let s=new Date(e);return(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:(0,c.GP)(s,"MMM d, yyyy")}),(0,a.jsx)("span",{children:(0,c.GP)(s,"h:mm a")}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:(0,r.m)(s,{addSuffix:!0})})]})};return(0,a.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Jobs"}),(0,a.jsxs)(o.$,{variant:"outline",size:"icon",onClick:()=>{J(!0),L()},disabled:H,children:[(0,a.jsx)(p.A,{className:"h-4 w-4 ".concat(H?"animate-spin":"")}),(0,a.jsx)("span",{className:"sr-only",children:"Refresh"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(N,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(x.p,{type:"search",placeholder:"Search jobs...",className:"w-[200px] pl-8",value:S,onChange:e=>C(e.target.value)})]}),(0,a.jsxs)(o.$,{onClick:()=>{R(null),M(!0)},children:[(0,a.jsx)(b.A,{className:"mr-2 h-4 w-4"}),"New Job"]})]})]}),t?(0,a.jsx)(E,{}):(0,a.jsx)("div",{className:"rounded-md border",children:(0,a.jsxs)(i.XI,{children:[(0,a.jsx)(i.A0,{children:(0,a.jsxs)(i.Hj,{children:[(0,a.jsx)(i.nd,{children:"Name"}),(0,a.jsx)(i.nd,{children:"Next Run"}),(0,a.jsx)(i.nd,{children:"Last Run"}),(0,a.jsx)(i.nd,{children:"Status"}),(0,a.jsx)(i.nd,{children:"Priority"}),(0,a.jsx)(i.nd,{className:"w-[100px]",children:"Actions"})]})}),(0,a.jsx)(i.BF,{children:0===G.length?(0,a.jsx)(i.Hj,{children:(0,a.jsx)(i.nA,{colSpan:6,className:"h-24 text-center",children:"No jobs found."})}):G.map(e=>(0,a.jsxs)(i.Hj,{children:[(0,a.jsx)(i.nA,{className:"font-medium",children:e.name}),(0,a.jsx)(i.nA,{children:B(e.nextRunAt)}),(0,a.jsx)(i.nA,{children:B(e.lastRunAt)}),(0,a.jsx)(i.nA,{children:I(e)}),(0,a.jsx)(i.nA,{children:e.priority}),(0,a.jsx)(i.nA,{children:(0,a.jsxs)(h.rI,{children:[(0,a.jsx)(h.ty,{asChild:!0,children:(0,a.jsxs)(o.$,{variant:"ghost",size:"icon",children:[(0,a.jsx)(f.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Actions"})]})}),(0,a.jsxs)(h.SQ,{align:"end",children:[(0,a.jsxs)(h._2,{onClick:()=>q(e.id),children:[(0,a.jsx)(y.A,{className:"mr-2 h-4 w-4"}),"Run Now"]}),(0,a.jsx)(h._2,{onClick:()=>O(e.id,e.disabled),children:e.disabled?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Enable"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.A,{className:"mr-2 h-4 w-4"}),"Disable"]})}),(0,a.jsxs)(h._2,{onClick:()=>T(e),children:[(0,a.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,a.jsxs)(h._2,{className:"text-destructive focus:text-destructive",onClick:()=>{R(e),D(!0)},children:[(0,a.jsx)(A.A,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},e.id))})]})}),(0,a.jsx)(j.lG,{open:_,onOpenChange:M,children:(0,a.jsxs)(j.Cf,{className:"sm:max-w-[600px]",children:[(0,a.jsxs)(j.c7,{children:[(0,a.jsx)(j.L3,{children:F?"Edit Job":"Create New Job"}),(0,a.jsx)(j.rr,{children:F?"Update the job details below.":"Fill in the details to create a new scheduled job."})]}),(0,a.jsx)(k.W,{job:F,onSubmit:$,onCancel:()=>M(!1)})]})}),(0,a.jsx)(u.Lt,{open:P,onOpenChange:D,children:(0,a.jsxs)(u.EO,{children:[(0,a.jsxs)(u.wd,{children:[(0,a.jsx)(u.r7,{children:"Are you sure?"}),(0,a.jsxs)(u.$v,{children:["This will permanently delete the job ",'"'.concat(null==F?void 0:F.name,'"'),". This action cannot be undone."]})]}),(0,a.jsxs)(u.ck,{children:[(0,a.jsx)(u.Zr,{children:"Cancel"}),(0,a.jsx)(u.Rx,{onClick:z,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})}function E(){return(0,a.jsx)("div",{className:"rounded-md border",children:(0,a.jsxs)(i.XI,{children:[(0,a.jsx)(i.A0,{children:(0,a.jsxs)(i.Hj,{children:[(0,a.jsx)(i.nd,{children:"Name"}),(0,a.jsx)(i.nd,{children:"Next Run"}),(0,a.jsx)(i.nd,{children:"Last Run"}),(0,a.jsx)(i.nd,{children:"Status"}),(0,a.jsx)(i.nd,{children:"Priority"}),(0,a.jsx)(i.nd,{className:"w-[100px]",children:"Actions"})]})}),(0,a.jsx)(i.BF,{children:[,,,,,].fill(0).map((e,s)=>(0,a.jsxs)(i.Hj,{children:[(0,a.jsx)(i.nA,{children:(0,a.jsx)(m.E,{className:"h-5 w-[150px]"})}),(0,a.jsx)(i.nA,{children:(0,a.jsx)(m.E,{className:"h-10 w-[120px]"})}),(0,a.jsx)(i.nA,{children:(0,a.jsx)(m.E,{className:"h-10 w-[120px]"})}),(0,a.jsx)(i.nA,{children:(0,a.jsx)(m.E,{className:"h-5 w-[80px]"})}),(0,a.jsx)(i.nA,{children:(0,a.jsx)(m.E,{className:"h-5 w-[40px]"})}),(0,a.jsx)(i.nA,{children:(0,a.jsx)(m.E,{className:"h-8 w-8 rounded-full"})})]},s))})]})})}},7314:(e,s,t)=>{"use strict";t.d(s,{DashboardStats:()=>f});var a=t(5155),l=t(2115),n=t(3464),c=t(3999);function r(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...t})}function i(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...t})}function d(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",s),...t})}function o(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",s),...t})}var x=t(7737),h=t(9946);let j=(0,h.A)("chart-no-axes-column-increasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]),u=(0,h.A)("calendar-clock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);var m=t(646),p=t(4861),N=t(4186),b=t(5339);function f(){let[e,s]=(0,l.useState)(null),[t,c]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{!async function(){try{let e=await n.A.get("http://localhost:3000/api/stats");s(e.data)}catch(e){console.error("Failed to fetch stats:",e)}finally{c(!1)}}()},[]),t)?(0,a.jsx)(v,{}):e?(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,a.jsx)(y,{title:"Total Jobs",value:e.total.toString(),icon:(0,a.jsx)(j,{className:"h-4 w-4 text-muted-foreground"})}),(0,a.jsx)(y,{title:"Scheduled",value:e.scheduled.toString(),icon:(0,a.jsx)(u,{className:"h-4 w-4 text-blue-500"})}),(0,a.jsx)(y,{title:"Completed",value:e.completed.toString(),icon:(0,a.jsx)(m.A,{className:"h-4 w-4 text-green-500"})}),(0,a.jsx)(y,{title:"Failed",value:e.failed.toString(),icon:(0,a.jsx)(p.A,{className:"h-4 w-4 text-red-500"})}),(0,a.jsx)(y,{title:"Queued",value:e.queued.toString(),icon:(0,a.jsx)(N.A,{className:"h-4 w-4 text-yellow-500"})}),(0,a.jsx)(y,{title:"Success Rate",value:"".concat(e.successRate,"%"),icon:(0,a.jsx)(b.A,{className:"h-4 w-4 text-purple-500"})})]}):(0,a.jsx)("div",{className:"rounded-lg border border-destructive/50 bg-destructive/10 p-4 text-destructive",children:"Failed to load statistics. Please try again."})}function y(e){let{title:s,value:t,icon:l}=e;return(0,a.jsxs)(r,{children:[(0,a.jsxs)(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(d,{className:"text-sm font-medium",children:s}),l]}),(0,a.jsx)(o,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:t})})]})}function v(){return(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Array(6).fill(0).map((e,s)=>(0,a.jsxs)(r,{children:[(0,a.jsxs)(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(x.E,{className:"h-4 w-[100px]"}),(0,a.jsx)(x.E,{className:"h-4 w-4"})]}),(0,a.jsx)(o,{children:(0,a.jsx)(x.E,{className:"h-8 w-[60px]"})})]},s))})}},9311:(e,s,t)=>{Promise.resolve().then(t.bind(t,4167)),Promise.resolve().then(t.bind(t,7314))}},e=>{var s=s=>e(e.s=s);e.O(0,[303,597,186,441,684,358],()=>s(9311)),_N_E=e.O()}]);